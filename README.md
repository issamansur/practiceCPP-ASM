# Практика по С+++ (С++ + ASM)
## Содержание:
1. [Команды процессора](#commands)
2. [Операнды](#operands)
3. [Адресация слов и байтов](#addresses)
4. [Сегментирование](#segments)
5. [Основные группы команд процессора](#main-commands)
 
## Команды процессора <a name="commands"></a>
- [Префиксы] [Оператор] [Операнды] [Режим адресации] [Префикс команды]
- Состоят из одного-нескольких байт (чем меньше - тем быстрее)
  - Первый байт указывает на **кол-во читаемых байтов** процессором
  - **Код операции**, выполняемый процессором
  - [**Операнды**](#operands), с которыми выполняется операция
- Преобразуются процессором в последовательность **внутренних команд**
    
## Операнды <a name="operands"></a>
- Операнды - это **коды данных**, с которыми проводятся операции (**входные** и **выходные**)
- Могут быть **регистрами**, **константами** или **адресами в памяти**
- Располагаются:
  - во **внутренних регистрах** - удобно, но **недостаточно места**
  - в **ячейках памяти** - часто и удобно - в массивах
  - в **устр-ах ввода/вывода** - редко, при обмене с внешн. устройствами
- **Адресация операндов** указывает процессору на расположение операндов:
  - 1.1. **Непосредственная** адресация - |в памяти под программу| хранится сам операнд (значение)
  - 1.2. **Прямая/абсолютная** адресация - |в памяти под программу| хранится адрес(ссылка) на сам операнд в |данных| 
  - ![image](https://github.com/issamansur/practiceCPP-ASM/assets/77580844/17f2b4ab-d8c0-40d2-b92c-4dbb88f6ed00)
  - ![image](https://github.com/issamansur/practiceCPP-ASM/assets/77580844/0c5e796c-8eda-4c98-ad35-304b677cd290)
- После выполнения операции **содержимое регистра меняется** в зависимости от типа адресации:
  - 2.1. **автоинкрементная** адресация - увеличивается на 1-2
  - 2.2. **автодекрементная** адресация - уменьшается на 1-2
  - 2.3. **буфер типа LIFO** (например, в стеке) - оба типа используются.

## Адресация слов и байтов <a name="addresses"></a>
- Слово имеет четный адрес (0, 2, 4, ..., 2n)
- Слово состоит из двух байтов (16 битов):
  - **Старший байт** (первые 8 бит) имеет **нечётный адрес** (1, 3, 5, ..., 2n-1)
  - **Младший байт** (вторые 8 бит) имеет **чётный адрес** (0, 2, 4, ..., 2n) - совпадает с байтом слова
  - ![image](https://github.com/issamansur/practiceCPP-ASM/assets/77580844/05046e3e-aaf5-4006-8e50-9bd70e474976)

## Сегментирование <a name="segments"></a>
- Память разбивается на **сегменты**
- Сегмент состоит из:
  - **Адрес** сегмента (первый байт сегмента) (начало)
  - **Размер** сегмента (10 000 байт = 64 Кбайт)
  - **Смещение** - сдвиг от адреса (начала) указывает на какой-либо **физический адрес**
  - ![image](https://github.com/issamansur/practiceCPP-ASM/assets/77580844/259709e3-4d62-4489-a8e0-8abcbf1cf7f7)
  - ![image](https://github.com/issamansur/practiceCPP-ASM/assets/77580844/d60ae61d-dcb5-42ab-bd57-81979eb3c015)

## Основные группы команд процессора <a name="main-commands"></a>
- Команды **пересылки данных**:
  - Данные пересылаются/копируются между **памятью**, **регистрами процессора** и **УВВ** (устройством ввода и вывода)
  - **Не требуют** выполнения операций **над данными**
    1. **Загрузка/запись** содержимого **во** внутренние **регистры** процессора
    2. **Сохранение** **в памяти/стеке** содержимого внутренних регистров процессора
    3. **Копирование** содержимого из одной области памяти в другую
    4. **Запись в УВВ** и **чтение из УВВ**
    5. **Обмен** информацией **между регистром** и **регистром или памятью**
    6. **Обмен** информацией **между байтами регистра или памяти**
- **Арифметические** команды:
  - Параметры: **1-2 входных**, **1 выходной**
    1. Команды операций **с фикс. запятой** - знак любой
    2. Команды операций **с плав. запятой** - операнды в 2+ ячейках памяти
    3. Команды **очистки** - быстрее пересылки. возоможно логическая
    4. Команды **(инк-/де-)кремента** +=1 / -=1
    5. Команды **сравнения** - формирует флаги результата на основании сравнения операндов
- **Логические** команды (выполняются **побитово**):
  - Параметры: **1-2 входных**, **1 выходной**
    1. Логические **И, ИЛИ, ИСКЛ. ИЛИ, побитная инверсия по маске**
    2. Лог., арифм., цикл. **сдвиги** - вправо или влево, с разными значениями вдвигаемых битов
    3. **Проверка** битов и операндов - устанавливает флаги состояния
    4. **Установка и очистка** битов/флагов регистра состояния процессора (PSW) - для принудительного перевода процессора в какой-либо режим 
- Команды **переходов**:
  - Нет операндов
  - Изменение регистров счётчиков команд
  - Вызов подпрограмм, ветвление алгоритмов
  1. **Безусловные** - ...
  2. **Условные** - в зависимости от значений флагов регистра состояния процессора:
    - если **0 / 1**
    - если **есть/нет** переполнение
    - если **> 0, < 0, >= 0, <= 0**
    - т. д.
  3. Переход **с возвратом**
  4. Проверка условий **через команду сравнению**
- ![image](https://github.com/issamansur/practiceCPP-ASM/assets/77580844/8c939897-328e-4890-881a-884edcb5a05e)


    
